<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marcineiros</title>
    <link rel="stylesheet" href="estiliza.css">
</head>
<body>
    <header class="header">
        <div class="logo">
            <img src="logo.jpg" alt="logo">
            <div class="logo-text">
                <strong>Casa da madeira</strong>
                <small>Desde 2017</small>
            </div>
        </div>
        
        <div class="header-right">
            <a href="fale_conosco.html" class="btn">Fale Conosco</a>
            <a href="pedido.html" class="btn">Realizar Pedido</a>
            <a href="encomendas.html" class="btn">Encomendas feitas</a>
            <a href="logout.php" class="btn">Logout</a>
        </div>
    </header>

    <main>
        <div class="intro-section">
            <h1>Bem-vindo à Casa da Madeira</h1>
            <p>
                Veja as diferentes marcenarias feitas por Amilcar Daniel Cesa.
                Também estamos disponíveis para fazer pedidos customizados, dependendo de suas preferências e desejos.
            </p>
        </div>
    </main>
    <main>
        <section class="catalog-section">
            <h2 class="catalog-title">Nosso Catálogo</h2>
            
            <div id="catalog-container">
                <div class="loading">Carregando produtos...</div>
            </div>
        </section>
    </main>

    <script>
        // Buscar itens do banco de dados
        fetch('home.php')
            .then(response => response.json()) // converte a resposta em json
            .then(itens => {
                const container = document.getElementById('catalog-container');
                
                if (itens.length === 0) { // verificação se tem itens no banco
                    container.innerHTML = `
                        <div class="empty-catalog">
                            <p>Nenhum item disponível no momento.</p>
                        </div>
                    `;
                } else { 
                    let html = '<div class="catalog-grid">';
                    
                    itens.forEach(item => { // método do array que executa uma função para cada elemento do array
                        html += `
                            <div class="catalog-item">
                                <div class="item-image">
                                    ${item.imagem ? 
                                    `<img src="${item.foto1}" alt="${item.nome}">` :
                                    '<div class="no-image">Sem imagem</div>'
                                }
                                </div>
                                
                                <div class="item-details">
                                    <h3 class="item-name">${item.nome}</h3>
                                    
                                    ${item.descricao ? 
                                        `<p class="item-description">${item.descricao}</p>` : 
                                        ''
                                    }
                                    
                                    ${item.preco ? 
                                        `<p class="item-price">R$ ${parseFloat(item.preco).toFixed(2).replace('.', ',')}</p>` :
                                        ''
                                    }
                                    
                                    <a href="pedido.html?item=${item.id}" class="btn-order">
                                        Fazer Pedido
                                    </a>
                                </div>
                            </div>
                        `;
                    });
                    
                    html += '</div>';
                    container.innerHTML = html;
                }
            })
            .catch(error => {
                console.error('Erro ao carregar itens:', error);
                document.getElementById('catalog-container').innerHTML = `
                    <div class="empty-catalog">
                        <p>Erro ao carregar produtos. Tente novamente mais tarde.</p>
                    </div>
                `;
            });
    </script>

</body>
</html>